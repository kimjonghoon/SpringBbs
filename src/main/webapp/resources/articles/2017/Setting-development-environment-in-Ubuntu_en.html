<article>
<div class="last-modified">Last Modified 2017.11.13</div>

<h1>Set up the project on Ubuntu</h1>

<h2>Ubuntu 16.04 Install</h2>

<p>
Download Ubuntu 16.04 LTS from <a href="http://www.ubuntu.com/download/desktop">http://www.ubuntu.com/download/desktop</a>.
</p>

<h3>Make Bootable USB</h3>

<p>
On Window System, See <a href="http://www.ubuntu.com/download/desktop/create-a-usb-stick-on-windows">http://www.ubuntu.com/download/desktop/create-a-usb-stick-on-windows</a>.<br />
On Ubuntu System, Follow the instructions below.<br />
Insert the USB and check the USB device.
</p>

<pre class="shell-prompt">
sudo ls -l /dev/disk/by-id/*usb*
</pre>

<p>
If sdb, sdb1, and sdb2 are seen together, sdb is a USB device.<br />
Navigate to the folder where the Ubuntu ISO file is located.<br />
Execute the following command.
</p>
 
<pre class="shell-prompt">
sudo dd if=<strong>filename.iso</strong> of=<strong>/dev/sdb</strong> bs=4M; sync
</pre>

<p>
Replace <b>filename.iso</b> with the downloaded Ubuntu ISO file name.<br />
Replace <b>/dev/sdb</b> with your USB device.
</p>

<h2>Oracle 11g XE Install</h2>

<p>
<a href="http://meandmyubuntulinux.blogspot.kr/2012/05/installing-oracle-11g-r2-express.html">http://meandmyubuntulinux.blogspot.kr/2012/05/installing-oracle-11g-r2-express.html</a><br />
아래는 위 사이트에서 우분투 시스템에 오라클 설치 방법을 해석한 글이다.<br />
</p>

<p>
오라클 공식 사이트에서 리눅스용 오라클 11g XE를 내려받는다.<br /> 
<a href="http://www.oracle.com/technetwork/database/database-technologies/express-edition/downloads/index.html">http://www.oracle.com/technetwork/database/database-technologies/express-edition/downloads/index.html</a><br />
Accept License Agreement 라디오 박스에 체크하고 Oracle Database Express Edition 11g Release 2 for Linux x64를 선택한다.<br />
로그인 화면으로 이동하는데 로그인하면 내려받기가 시작된다.<br />
오라클 공식 웹사이트 회원이 아니면 회원 가입을 한다.<br />
모두 내려받았다면 파일이 있는 디렉터리로 이동해 다음 명령을 수행한다.
</p>

<pre class="shell-prompt">
unzip oracle-xe-11.2.0-1.0.x86_64.rpm.zip
sudo apt-get install alien libaio1 unixodbc
cd Disk1
sudo alien --scripts -d oracle-xe-11.2.0-1.0.x86_64.rpm
</pre>

<p>
/sbin/chkconfig 파일을 만든다.
</p>

<pre class="shell-prompt">
sudo nano /sbin/chkconfig
</pre>

<p>
다음을 복사하여 파일에 붙여넣는다.
</p>

<pre class="prettyprint">
#!/bin/bash
# Oracle 11gR2 XE installer chkconfig hack for Ubuntu
file=/etc/init.d/oracle-xe
if [[ ! `tail -n1 $file | grep INIT` ]]; then
echo >> $file
echo '### BEGIN INIT INFO' >> $file
echo '# Provides: OracleXE' >> $file
echo '# Required-Start: $remote_fs $syslog' >> $file
echo '# Required-Stop: $remote_fs $syslog' >> $file
echo '# Default-Start: 2 3 4 5' >> $file
echo '# Default-Stop: 0 1 6' >> $file
echo '# Short-Description: Oracle 11g Express Edition' >> $file
echo '### END INIT INFO' >> $file
fi
update-rc.d oracle-xe defaults 80 01
</pre>

<p>
파일을 저장하고 실행 권한을 부여한다.
</p>

<pre class="shell-prompt">
sudo chmod 755 /sbin/chkconfig
</pre>

<p>
커널 파라미터를 설정한다.
</p>

<pre class="shell-prompt">
sudo nano /etc/sysctl.d/60-oracle.conf
</pre>

<p>
다음 내용을 복사하여 파일에 붙인다.
</p>

<pre class="prettyprint">
# Oracle 11g XE kernel parameters  
fs.file-max=6815744  
net.ipv4.ip_local_port_range=9000 65000  
kernel.sem=250 32000 100 128 
kernel.shmmax=2066743296
</pre>

<p>
마지막 줄 kernel.shmmax 값은 시스템에 설치된 램 메모리의 1/2을 할당한다.<br />
계산 방법은 아래와 같다.<br />
</p>

<pre class="shell-prompt">
free -m
</pre>

<p>
결과가 다음과 같으면
</p>

<pre class="shell-prompt">
             total       used       free     shared    buffers     cached
Mem:          3942       3809        133        947         50       1571
-/+ buffers/cache:       2186       1756
Swap:         4083        378       3705
</pre>

<p>
3942 * 1024 * 1024 * 0.5 = 2066743296<br />
<br />
검증한다.<br />
</p>

<pre class="shell-prompt">
sudo cat /etc/sysctl.d/60-oracle.conf
</pre>

<p>
새로운 커널 파라미터를 올린다.
</p>

<pre class="shell-prompt">
sudo service procps start
</pre>

<p>
검증한다.
</p>

<pre class="shell-prompt">
sudo sysctl -q fs.file-max
</pre>

<p>
다음을 실행한다.<br />
</p>

<pre class="shell-prompt">
sudo ln -s /usr/bin/awk /bin/awk
sudo mkdir /var/lock/subsys
sudo touch /var/lock/subsys/listener
</pre>

<p>
오라클 설치 파일이 있는 Disk1 디렉터리에서 다음 명령으로 설치를 시작한다.
</p>
  
<pre class="shell-prompt">
sudo dpkg --install oracle-xe_11.2.0-2_amd64.deb
sudo /etc/init.d/oracle-xe configure
</pre>

<p>
설정에서 Oracle Application Express의 포트는 톰캣과 같은 WAS가 쓰는 8080을 피한다.<br />
(아래에서는 8989로 설정했다.)<br />
리슨너 포트는 디폴트 값인 1521를 그대로 사용한다. (디폴트 선택은 그냥 엔터를 치면 된다.)<br />
관리자 계정인 SYS와 SYSTEM의 비밀번호를 설정한다.<br />
부팅시 오라클 자동시작을 예스로 설정한다.(엔터)<br />
</p>

<pre class="shell-prompt">
Oracle Database 11g Express Edition Configuration
-------------------------------------------------
This will configure on-boot properties of Oracle Database 11g Express 
Edition.  The following questions will determine whether the database 
should be starting upon system boot, the ports it will use, and 
the passwords that will be used for database accounts.  
Press Enter to accept the defaults. 
Ctrl-C will abort.

Specify the HTTP port that will be used 
	for Oracle Application Express [8080]:<strong>8989</strong>

Specify a port that will be used for the database listener [1521]:

Specify a password to be used for database accounts.
Note that the same password will be used for SYS and SYSTEM.
Oracle recommends the use of different passwords 
for each database account.
This can be done after 
initial configuration: <strong>&lt;관리자 비밀번호&gt;</strong>
Confirm the password: <strong>&lt;관리자 비밀번호&gt;</strong>

Do you want Oracle Database 11g Express Edition to be started 
on boot (y/n) [y]:

Starting Oracle Net Listener...Done
Configuring database...Done
Starting Oracle Database 11g Express Edition instance...Done
Installation completed successfully.
</pre>

<p>
환경변수를 추가한다.
</p>

<pre class="shell-prompt">
gedit ~/.bashrc
</pre>

<p>
아래를 복사하여 .bashrc 가장 아래에 붙여넣는다.
</p>

<pre class="prettyprint">
export ORACLE_HOME=/u01/app/oracle/product/11.2.0/xe
export ORACLE_SID=XE
export NLS_LANG=`$ORACLE_HOME/bin/nls_lang.sh`
export ORACLE_BASE=/u01/app/oracle
export LD_LIBRARY_PATH=$ORACLE_HOME/lib:$LD_LIBRARY_PATH
export PATH=$ORACLE_HOME/bin:$PATH
</pre>

<p>
다음 명령으로 환경 변수를 적용한다.<br />
</p>

<pre class="shell-prompt">
source ~/.bashrc
</pre>

<p>
오라클을 시작한다.<br />
(부팅시 오라클 시작을 예스로 설정했으므로 재부팅 후 이 명령은 필요 없다.)
</p>

<pre class="shell-prompt">
sudo service oracle-xe start
</pre>


<h3>SCOTT 계정 만들기</h3>

<p>
관리자 계정으로 오라클에 로그인한다.<br />
</p>

<pre class="shell-prompt">
<strong>sqlplus sys as sysdba</strong>

SQL*Plus: Release 11.2.0.2.0 Production on 월 6월 29 12:04:33 2015

Copyright (c) 1982, 2011, Oracle.  All rights reserved.

Enter password: <strong>&lt;관리자 비밀번호&gt;</strong>

Connected to:
Oracle Database 11g Express Edition Release 11.2.0.2.0 - 64bit Production

SQL> <strong>@/u01/app/oracle/product/11.2.0/xe/rdbms/admin/utlsampl.sql</strong>
</pre>

<h2>JDK 설치</h2>

<p>
<a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a>에서 jdk 9를 내려받는다.<br />
다운로드 폴더로 이동하여 압축을 풀고 /opt로 옮긴다.
</p>

<pre class="shell-prompt">
cd ~/다운로드/
tar -xvzf jdk-9.0.1_linux-x64_bin.tar.gz
sudo mv jdk-9.0.1/ /opt/java
</pre>

<p>
gedit ~/.bashrc 로 .bashrc 파일을 연다.
</p>

<pre class="shell-prompt">
gedit ~/.bashrc &amp; 
</pre>

<p>
.bashrc 파일에 다음을 추가한다.
</p>

<pre class="prettyprint">
export JAVA_HOME=/opt/java
export PATH=$JAVA_HOME/bin:$PATH
</pre>

<p>
환경 변수 설정을 적용한다.
</p>

<pre class="shell-prompt">
source ~/.bashrc
</pre>

<p>
자바 버전을 확인한다.
</p>

<pre class="shell-prompt">
java -version
java version "9.0.1"
Java(TM) SE Runtime Environment (build 9.0.1+11)
Java HotSpot(TM) 64-Bit Server VM (build 9.0.1+11, mixed mode)
</pre>

<h3>JDBC 테스트</h3>

<p>
다음 GetEmp.java 파일을 홈 디렉터리에 만든다.<br />
<script src="https://gist.github.com/kimjonghoon/ea49c337a11dfa5dd08c.js"></script>

GetEmp.java 파일을 생성하고 GetEmp.java 파일이 있는 디렉터리에서 다음을 수행한다.<br />
(유닉스에서 환경변수 구분자는 : 이다.)
</p>

<pre class="shell-prompt">
javac GetEmp.java
java -classpath \
.:/u01/app/oracle/product/11.2.0/xe/jdbc/lib/ojdbc6.jar GetEmp
</pre>

<h2>메이븐 설치</h2>

<p>
sudo apt 명령어로 설치하지 말자.<br />
<a href="https://maven.apache.org/download.cgi">https://maven.apache.org/download.cgi</a>에서 최신 바이너리 파일을 내려받는다.<br />
내려받은 디렉터리로 이동하여 압축을 풀고 생성된 디렉터리를 /opt로 옮긴다.
</p>


<pre class="shell-prompt">
cd ~/다운로드/
tar -xvzf apache-maven-3.5.2-bin.tar.gz
sudo mv apache-maven-3.5.2/ /opt/maven
</pre>

<p>
gedit ~/.bashrc 로 .bashrc 파일을 연다.
</p>

<pre class="shell-prompt">
gedit ~/.bashrc &amp; 
</pre>

<p>
.bashrc 파일에 다음을 추가한다.
</p>

<pre class="prettyprint">
export MAVEN_HOME=/opt/maven
export PATH=$MAVEN_HOME/bin:$PATH
</pre>

<p>
환경 변수 설정을 적용한다.
</p>

<pre class="shell-prompt">
source ~/.bashrc
</pre>

<p>
메이븐 버전을 확인한다.
</p>

<pre class="shell-prompt">
mvn -v
Apache Maven 3.5.2 (138edd61fd100ec658bfa2d307c43b76940a5d7d; 2017-10-18T16:58:13+09:00)
Maven home: /opt/maven
Java version: 9.0.1, vendor: Oracle Corporation
Java home: /opt/java
Default locale: ko_KR, platform encoding: UTF-8
OS name: "linux", version: "4.4.0-98-generic", arch: "amd64", family: "unix"
</pre>

<h2>이클립스 설치</h2>

<p>
자바 9를 설치한 시스템에 이클립스 최전 버전을 설치하고 테스트한 결과 메모리 누수 현상이 발생했다.
따라서 2017.11.13일 현재 IDE로 이클립스를 추천할 수 없다.
그럼에도 이클립스를 설치하려 한다며 다음을 참조할 것
</p>

<p>
<a href="https://www.eclipse.org/downloads/eclipse-packages/">https://www.eclipse.org/downloads/eclipse-packages/</a>에서 Eclipse IDE for Java EE Developers 를 내려받는다.<br />
내려받은 파일이 있는 디렉터리로 이동하여 압축을 푼다.
</p>

<pre class="shell-prompt">
tar -xvf eclipse-jee-oxygen-1a-linux-gtk-x86_64.tar.gz
</pre>

<p>
생성된 eclipse 디렉터리를 /opt 디렉터리로 옮긴다.<br />
</p>

<pre class="shell-prompt">
sudo mv eclipse /opt/
</pre>

<h3>eclipse.desktop 파일 생성</h3>

<pre class="shell-prompt">
cd ~/.local/share/applications/
gedit eclipse.desktop
</pre>

<p>
다음을 복사하여 eclipse.desktop 파일에 붙여넣는다.
</p>

<pre class="prettyprint">
[Desktop Entry]
Name=Eclipse
Type=Application
Exec=/opt/eclipse/eclipse
Terminal=false
Icon=/opt/eclipse/icon.xpm
Comment=Integrated Development Environment
NoDisplay=false
Categories=Development;IDE
Name[en]=eclipse.desktop
</pre>

<p>
eclipse를 검색하여 실행한다.<br />
이클립스를 런처에 고정한다.
</p>


<h2>Git 설치</h2>

<pre class="shell-prompt">
sudo apt install git
</pre>

<p>
git 버전 확인을 확인한다.
</p>

<pre class="shell-prompt">
git --version
</pre>

<p>
SpringBbs 프로젝트를 설치하려면 다음을 수행한다.
</p>

<pre class="shell-prompt">
git clone https://github.com/kimjonghoon/SpringBbs
</pre>

<p>
이클립스를 열고 SpringBbs를 임포트한다.<br /> 
<img alt="컨텍스트 메뉴에서 Import" src="https://lh3.googleusercontent.com/-VjWpQCEiqes/VYYV3b2GPFI/AAAAAAAACh0/-KoRbgI8nn0/s590/maven-project-import.png"><br />
<img alt="이클립스에서 메이븐 프로젝트 Import" src="https://lh3.googleusercontent.com/-uDuAOI41Aj4/VYYV3Pmo4qI/AAAAAAAAChw/m4HA61kOVbE/s610/eclipse-with-maven.png"><br />
pom.xml과 이클립스를 동기화한다.<br />
Package Explorer 뷰에서 프로젝트를 선택하고 마우스 오른쪽 버튼으로 컨텍스트 메뉴를 연다.<br />
Maven - Update Project Configuration을 차례로 선택한다.<br />
</p>

<h3>오라클 테이블 생성</h3>

<p>
system 계정으로 접속해 다음 SQL문을 실행한다.<br />
<script src="https://gist.github.com/kimjonghoon/4ad45823c45c1d60b15c.js"></script>
</p>

<h2>MySQL 설치</h2>

<pre class="shell-prompt">
sudo apt install mysql-server mysql-client
</pre>

<h3>MySQL 테이블 생성</h3>

<p>
다음 SQL문을 실행한다.<br />
<script src="https://gist.github.com/kimjonghoon/95af96412582a8f8c0cb.js"></script>
</p>

<h2>디렉터리 수정</h2>

<p>
net.java_school.commons.WebContants.java 파일을 열고 업로드 디렉터리를 자신의 시스템에 맞게 수정한다.
</p>

<h2>테스트</h2>

<p>
SpringBbs의 루트 디렉터리에서 다음 명령을 실행한다.<br />
</p>

<pre class="shell-prompt">
mvn jetty:run
</pre>

<p>
http://localhost:8080에 방문해 테스트한다.
</p>

<span id="refer">참고</span>
<ul id="references">
	<li><a href="http://crunchbang.org/forums/viewtopic.php?id=23267">http://crunchbang.org/forums/viewtopic.php?id=23267</a></li>
	<li><a href="http://meandmyubuntulinux.blogspot.kr/2012/05/installing-oracle-11g-r2-express.html">http://meandmyubuntulinux.blogspot.kr/2012/05/installing-oracle-11g-r2-express.html</a></li>
</ul>

<span id="related-articles">관련 글</span>
<ul id="related-articles-ul">
    <li><a href="/spring/spring-mvc-with-maven">메이븐 스프링 MVC 실습</a></li>
    <li><a href="/spring/spring-mvc-bbs">스프링 MVC 게시판</a></li>
    <li><a href="/spring/spring-security-config">스프링 시큐리티 웹 요청 보안</a></li>
    <li><a href="/spring/method-security">스프링 시큐리티 메서드 보안</a></li>
    <li><a href="/spring/security-at-view-layer">스프링 시큐리티 뷰 레벨 보안</a></li>
    <li><a href="/spring/bean-validation-at-signUp">회원가입 빈 유효성 검사</a></li>
    <li><a href="/spring/bean-validation-at-editAccount">내 정보 수정 빈 유효성 검사</a></li>
    <li><a href="/spring/bean-validation-at-changePasswd">비밀번호 변경 빈 유효성 검사</a></li>
    <li><a href="/spring/bean-validation-at-write-article">글쓰기 빈 유효성 검사</a></li>
    <li><a href="/spring/bean-validation-at-modify-article">게시글 수정 빈 유효성 검사</a></li>
    <li><a href="/blog/2017/i18n">국제화</a></li>
    <li><a href="/blog/2017/downloadController">다운로드 컨트롤러</a></li>
    <li><a href="/blog/2017/spring-mvc-apache-tiles">아파치 타일즈</a></li>
    <li><a href="/blog/2015/spring-security-password-encoder">스트링 시큐리티 비밀번호 암호화</a></li>
    <li><a href="/blog/2016/spring-security-access-denied-handling">스프링 시큐리티에서 접근 거부 핸들링</a></li>
    <li><a href="/blog/2017/spring-mvc-ajax-example">스프링 MVC에서 돌아가는 간단한 에이잭스 예제</a></li>
    <li><a href="/blog/2017/SpringBbs-with-MySql">MySql용 SpringBbs</a></li>
    <li><a href="/blog/2017/jetty-maven-plugin">Jetty Maven Plugin</a></li>
    <li><a href="/blog/2017/REST-example">REST 예제</a></li>
    <li><a href="/blog/2017/basic-board">게시판 기본 기능</a></li>
    <li><a href="/blog">블로그 목록</a></li>
</ul>

</article>
